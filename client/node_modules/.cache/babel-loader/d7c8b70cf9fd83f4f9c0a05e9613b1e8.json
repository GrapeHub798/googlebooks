{"ast":null,"code":"var _jsxFileName = \"D:\\\\Code\\\\googlebooks\\\\client\\\\src\\\\pages\\\\favorite\\\\favorites.jsx\";\nimport React, { Component } from 'react';\nimport { updateBooks } from \"../../redux/actions\";\nimport { Row, Col, Form, Button } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport AppList from '../../components/list/list';\nimport FavoriteApi from \"../../api/favorite.api\";\nimport favoriteService from \"../../services/favorite.service\";\nimport BookModel from \"../../model/book.model\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { withStyles } from \"@material-ui/core/styles\";\n\nconst mapStateToProps = state => {\n  const storeProps = {};\n\n  for (const [key, value] of Object.entries(state)) {\n    storeProps[key] = value;\n  }\n\n  return {\n    storeProps\n  };\n};\n\nconst mapDispatchToProps = dispatch => ({\n  updateBooks: bookUpdate => new Promise((resolve, reject) => {\n    dispatch(updateBooks(bookUpdate));\n    resolve();\n  })\n});\n\nconst useStyles = theme => ({\n  grow: {\n    flexGrow: 1\n  },\n  menuButton: {\n    marginRight: theme.spacing(2)\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block'\n    }\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    marginRight: theme.spacing(2),\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing(3),\n      width: 'auto'\n    }\n  },\n  searchIcon: {\n    padding: theme.spacing(0, 2),\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  },\n  inputRoot: {\n    color: 'inherit'\n  },\n  inputInput: {\n    padding: theme.spacing(1, 1, 1, 0),\n    // vertical padding + font size from searchIcon\n    paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('md')]: {\n      width: '20ch'\n    }\n  }\n});\n\nclass AppFavorites extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: false,\n      fetchingBooks: false,\n      errorMessage: '',\n      hasBooks: false,\n      defaultCollection: 'books_favorite',\n      resultsPerPage: 10,\n      currentPage: 1\n    };\n    this.favoriteApi = new FavoriteApi();\n  }\n\n  componentDidMount() {\n    //get our favorites\n    this.subscription = favoriteService.updateFavorites().subscribe(favoriteId => {//this.doSearch(pageNumber);\n    });\n    this.getFavorites();\n  }\n\n  componentWillUnmount() {\n    this.subscription.unsubscribe();\n  }\n\n  getFavorites() {\n    this.favoriteApi.getFavorites().then(favorites => {\n      if (!favorites && !favorites.data) {\n        return;\n      }\n\n      const total = favorites.data.length;\n      const rawData = favorites.data;\n      const books = rawData.map(x => {\n        const book = new BookModel();\n        book.createFromObject(x);\n        return book;\n      });\n      const pageCount = Math.ceil(total / this.state.resultsPerPage);\n      this.props.updateBooks({\n        collectionName: this.state.defaultCollection,\n        books: books,\n        pageCount: pageCount > 50 ? 40 : pageCount,\n        currentPage: this.state.currentPage\n      }).then(() => {\n        this.setState({\n          error: false,\n          hasBooks: true\n        });\n      });\n    });\n  }\n\n  render() {\n    const error = this.state.error;\n    const fetchingBooks = this.state.fetchingBooks;\n    const hasBooks = this.state.hasBooks;\n    const errorMessage = this.state.errorMessage;\n    const bookCollection = this.state.defaultCollection;\n    const {\n      classes\n    } = this.props;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(AppBar, {\n      position: \"static\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(Toolbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      edge: \"start\",\n      className: classes.menuButton,\n      color: \"inherit\",\n      \"aria-label\": \"open drawer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 8\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.title,\n      variant: \"h6\",\n      noWrap: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 8\n      }\n    }, \"Favorites\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.grow,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 8\n      }\n    }))))), /*#__PURE__*/React.createElement(Row, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 4\n      }\n    }, hasBooks ? /*#__PURE__*/React.createElement(AppList, {\n      showPagination: false,\n      collectionToUse: bookCollection,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }) : fetchingBooks ? /*#__PURE__*/React.createElement(Col, {\n      className: \"text-center fetching-books\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 6\n      }\n    }, \"Loading Favorites....\") : error ? /*#__PURE__*/React.createElement(Col, {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 14\n      }\n    }, errorMessage) : /*#__PURE__*/React.createElement(Col, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 66\n      }\n    })));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(useStyles)(AppFavorites));","map":{"version":3,"sources":["D:/Code/googlebooks/client/src/pages/favorite/favorites.jsx"],"names":["React","Component","updateBooks","Row","Col","Form","Button","connect","AppList","FavoriteApi","favoriteService","BookModel","AppBar","Toolbar","IconButton","Typography","withStyles","mapStateToProps","state","storeProps","key","value","Object","entries","mapDispatchToProps","dispatch","bookUpdate","Promise","resolve","reject","useStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","search","position","borderRadius","shape","marginLeft","width","searchIcon","padding","height","pointerEvents","alignItems","justifyContent","inputRoot","color","inputInput","paddingLeft","transition","transitions","create","AppFavorites","constructor","props","error","fetchingBooks","errorMessage","hasBooks","defaultCollection","resultsPerPage","currentPage","favoriteApi","componentDidMount","subscription","updateFavorites","subscribe","favoriteId","getFavorites","componentWillUnmount","unsubscribe","then","favorites","data","total","length","rawData","books","map","x","book","createFromObject","pageCount","Math","ceil","collectionName","setState","render","bookCollection","classes"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport {updateBooks} from \"../../redux/actions\";\r\nimport {Row, Col, Form, Button} from 'react-bootstrap';\r\nimport {connect} from 'react-redux';\r\nimport AppList from '../../components/list/list';\r\nimport FavoriteApi from \"../../api/favorite.api\";\r\nimport favoriteService from \"../../services/favorite.service\";\r\nimport BookModel from \"../../model/book.model\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport {withStyles} from \"@material-ui/core/styles\";\r\n\r\nconst mapStateToProps = (state) => {\r\n\tconst storeProps = {};\r\n\tfor (const [key, value] of Object.entries(state)){\r\n\t\tstoreProps[key] = value;\r\n\t}\r\n\treturn {\r\n\t\tstoreProps\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n\tupdateBooks: (bookUpdate) => new Promise((resolve, reject) => {\r\n\t\tdispatch(updateBooks(bookUpdate));\r\n\t\tresolve();\r\n\t})\r\n});\r\n\r\nconst useStyles = theme => ({\r\n\tgrow: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2),\r\n\t},\r\n\ttitle: {\r\n\t\tdisplay: 'none',\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\tdisplay: 'block',\r\n\t\t},\r\n\t},\r\n\tsearch: {\r\n\t\tposition: 'relative',\r\n\t\tborderRadius: theme.shape.borderRadius,\r\n\t\tmarginRight: theme.spacing(2),\r\n\t\tmarginLeft: 0,\r\n\t\twidth: '100%',\r\n\t\t[theme.breakpoints.up('sm')]: {\r\n\t\t\tmarginLeft: theme.spacing(3),\r\n\t\t\twidth: 'auto',\r\n\t\t},\r\n\t},\r\n\tsearchIcon: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\theight: '100%',\r\n\t\tposition: 'absolute',\r\n\t\tpointerEvents: 'none',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tinputRoot: {\r\n\t\tcolor: 'inherit',\r\n\t},\r\n\tinputInput: {\r\n\t\tpadding: theme.spacing(1, 1, 1, 0),\r\n\t\t// vertical padding + font size from searchIcon\r\n\t\tpaddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\r\n\t\ttransition: theme.transitions.create('width'),\r\n\t\twidth: '100%',\r\n\t\t[theme.breakpoints.up('md')]: {\r\n\t\t\twidth: '20ch',\r\n\t\t},\r\n\t}\r\n});\r\n\r\nclass AppFavorites extends Component {\r\n\tstate = {\r\n\t\terror: false,\r\n\t\tfetchingBooks: false,\r\n\t\terrorMessage: '',\r\n\t\thasBooks: false,\r\n\t\tdefaultCollection: 'books_favorite',\r\n\t\tresultsPerPage: 10,\r\n\t\tcurrentPage: 1\r\n\t};\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.favoriteApi = new FavoriteApi();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\t//get our favorites\r\n\t\tthis.subscription = favoriteService.updateFavorites().subscribe(favoriteId => {\r\n\t\t\t//this.doSearch(pageNumber);\r\n\t\t})\r\n\r\n\t\tthis.getFavorites();\r\n\t}\r\n\r\n\tcomponentWillUnmount() {\r\n\t\tthis.subscription.unsubscribe();\r\n\t}\r\n\r\n\tgetFavorites() {\r\n\t\tthis.favoriteApi.getFavorites()\r\n\t\t\t.then((favorites) => {\r\n\t\t\t\tif (!favorites && !favorites.data){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst total = favorites.data.length;\r\n\t\t\t\tconst rawData = favorites.data;\r\n\t\t\t\tconst books = rawData.map((x) => {\r\n\t\t\t\t\tconst book = new BookModel();\r\n\t\t\t\t\tbook.createFromObject(x);\r\n\t\t\t\t\treturn book;\r\n\t\t\t\t});\r\n\t\t\t\tconst pageCount = Math.ceil(total / this.state.resultsPerPage);\r\n\t\t\t\tthis.props.updateBooks({\r\n\t\t\t\t\tcollectionName: this.state.defaultCollection,\r\n\t\t\t\t\tbooks: books,\r\n\t\t\t\t\tpageCount: pageCount > 50 ? 40 : pageCount,\r\n\t\t\t\t\tcurrentPage: this.state.currentPage,\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tthis.setState({error: false, hasBooks: true});\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst error = this.state.error;\r\n\t\tconst fetchingBooks = this.state.fetchingBooks;\r\n\t\tconst hasBooks = this.state.hasBooks;\r\n\t\tconst errorMessage = this.state.errorMessage;\r\n\t\tconst bookCollection = this.state.defaultCollection;\r\n\t\tconst {classes} = this.props;\r\n\t\treturn (<React.Fragment>\r\n\t\t\t<Row>\r\n\t\t\t\t<Col>\r\n\t\t\t\t\t<AppBar position=\"static\">\r\n\t\t\t\t\t\t<Toolbar>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tedge=\"start\"\r\n\t\t\t\t\t\t\t\tclassName={classes.menuButton}\r\n\t\t\t\t\t\t\t\tcolor=\"inherit\"\r\n\t\t\t\t\t\t\t\taria-label=\"open drawer\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t\t<Typography className={classes.title} variant=\"h6\" noWrap>\r\n\t\t\t\t\t\t\t\tFavorites\r\n\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t<div className={classes.grow}/>\r\n\t\t\t\t\t\t</Toolbar>\r\n\t\t\t\t\t</AppBar>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Row>\r\n\t\t\t\t{hasBooks ? <AppList showPagination = {false} collectionToUse = {bookCollection}/> : fetchingBooks ?\r\n\t\t\t\t\t<Col className=\"text-center fetching-books\">Loading Favorites....</Col> :\r\n\t\t\t\t\terror ? <Col className=\"text-center\">{errorMessage}</Col> : <Col/>}\r\n\t\t\t</Row>\r\n\t\t</React.Fragment>);\r\n\t}\r\n}\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(useStyles)(AppFavorites));\r\n"]},"metadata":{},"sourceType":"module"}